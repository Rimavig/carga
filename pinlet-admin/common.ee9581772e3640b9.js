"use strict";(self.webpackChunkngx_admin_demo=self.webpackChunkngx_admin_demo||[]).push([[592],{99501:(v,d,s)=>{s.d(d,{q:()=>r});var r=(()=>{return(a=r||(r={})).ACTIVO="A",a.INACTIVO="I",a.PENDIENTE="P",r;var a})()},97007:(v,d,s)=>{s.d(d,{Z:()=>_});var r=s(92340),a=s(94650),u=s(80529);let _=(()=>{class n{constructor(t){this.http=t,this.apiUrl=r.N.apiUrl}create(t){return this.http.post(`${this.apiUrl}/insertCiudad`,t)}getByProvince(t){return this.http.post(`${this.apiUrl}/getAllCiudad`,t)}getById(t){return this.http.post(`${this.apiUrl}/getCiudad`,t)}update(t){return this.http.post(`${this.apiUrl}/updateCiudad`,t)}updateStatus(t){return this.http.post(`${this.apiUrl}/updateEstadoCiudad`,t)}delete(t){return this.http.post(`${this.apiUrl}/deleteCiudad`,t)}}return n.\u0275fac=function(t){return new(t||n)(a.\u0275\u0275inject(u.eN))},n.\u0275prov=a.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()},44949:(v,d,s)=>{s.d(d,{f:()=>_});var r=s(92340),a=s(94650),u=s(80529);let _=(()=>{class n{constructor(t){this.http=t,this.apiUrl=r.N.apiUrl}create(t){return this.http.post(`${this.apiUrl}/insertProvincia`,t)}getByCountry(t){return this.http.post(`${this.apiUrl}/getAllProvincia`,t)}getById(t){return this.http.post(`${this.apiUrl}/getProvincia`,t)}update(t){return this.http.post(`${this.apiUrl}/updateProvincia`,t)}updateStatus(t){return this.http.post(`${this.apiUrl}/updateEstadoProvincia`,t)}delete(t){return this.http.post(`${this.apiUrl}/deleteProvincia`,t)}}return n.\u0275fac=function(t){return new(t||n)(a.\u0275\u0275inject(u.eN))},n.\u0275prov=a.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()},45096:(v,d,s)=>{s.d(d,{X:()=>e});var r=s(36517),a=s(74385),u=s(42658),_=s(36749),n=s(94650),p=s(7672),t=s(44949);let e=(()=>{class l{constructor(i,o,c,h){this._router=i,this._dialogService=o,this._toastrService=c,this._provinceService=h,this.settings={actions:{position:"right",add:!1,edit:!1,delete:!1,custom:[{name:"edit",title:'<i class="nb-edit"></i>'},{name:"delete",title:'<i class="nb-trash"></i>'}]},columns:{nombre:{title:"Nombre",type:"string"},estado:{title:"Estado",type:"custom",renderComponent:_.P,onComponentInitFunction:m=>{m.toggle.subscribe(P=>{this.updateStatus(P.row.id_provincia,P.value?"A":"I")})}}},noDataMessage:"No existen registros"},this.source=new a.nC}ngOnChanges(i){i.countryId?.currentValue&&(this.countryId=i.countryId?.currentValue,this.getProvinces(this.countryId))}getProvinces(i){this._provinceService.getByCountry({id_usuario:"1",id_pais:i}).subscribe({next:c=>{const h=c.filter(m=>"E"!=m.estado);this.source.load(h)},error:c=>{console.error(c)}})}onCustom(i){switch(i.action){case"edit":this._router.navigateByUrl(`/pages/provincias/editar/${i.data.id_provincia}`);break;case"delete":this.onDelete(i.data.id_provincia)}}onDelete(i){this._dialogService.open(u.S,{context:{title:"\xbfEst\xe1 seguro de eliminar el registro?"}}).onClose.subscribe({next:o=>{o&&this.deleteProvince(i)}})}updateStatus(i,o){this._provinceService.updateStatus({id_provincia:i,estado:o,usuario_modificacion:"admin"}).subscribe({next:()=>{this.showToast("success","Estado de provincia actualizado")},error:()=>{this.showToast("danger","Ha ocurrido un error. Intente nuevamente")}})}deleteProvince(i){this._provinceService.delete({id_provincia:i,usuario_modificacion:"admin"}).subscribe({next:()=>{this.showToast("success","Provincia eliminada"),this.getProvinces(this.countryId)},error:()=>{this.showToast("danger","Error al eliminar la provincia")}})}showToast(i,o){this._toastrService.show("",o,{status:i,destroyByClick:!0,duration:3e3,hasIcon:!1,position:r.fe3.TOP_RIGHT,preventDuplicates:!0})}}return l.\u0275fac=function(i){return new(i||l)(n.\u0275\u0275directiveInject(p.F0),n.\u0275\u0275directiveInject(r.Gln),n.\u0275\u0275directiveInject(r.quB),n.\u0275\u0275directiveInject(t.f))},l.\u0275cmp=n.\u0275\u0275defineComponent({type:l,selectors:[["ngx-provinces-list"]],inputs:{countryId:"countryId"},features:[n.\u0275\u0275NgOnChangesFeature],decls:1,vars:2,consts:[[1,"custom-table",3,"settings","source","custom"]],template:function(i,o){1&i&&(n.\u0275\u0275elementStart(0,"ng2-smart-table",0),n.\u0275\u0275listener("custom",function(h){return o.onCustom(h)}),n.\u0275\u0275elementEnd()),2&i&&n.\u0275\u0275property("settings",o.settings)("source",o.source)},dependencies:[a.T5],styles:["[_nghost-%COMP%]     tr .ng2-smart-actions{height:auto}[_nghost-%COMP%]     ng2-st-tbody-custom{display:flex}[_nghost-%COMP%]     ng2-st-tbody-custom a.ng2-smart-action.ng2-smart-action-custom-custom{display:inline-block;text-align:center}"]}),l})()}}]);