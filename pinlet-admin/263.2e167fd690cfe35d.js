"use strict";(self.webpackChunkngx_admin_demo=self.webpackChunkngx_admin_demo||[]).push([[263],{16469:(j,w,m)=>{m.d(w,{t:()=>p});var p=(()=>{return(l=p||(p={}))[l.residentesPendientes=1]="residentesPendientes",l[l.residentesActivos=2]="residentesActivos",l[l.residentesInactivos=3]="residentesInactivos",l[l.anuncios=4]="anuncios",l[l.primariosSecundarios=5]="primariosSecundarios",l[l.reportes=6]="reportes",l[l.chat=7]="chat",l[l.servicios=8]="servicios",l[l.tarjeta=9]="tarjeta",l[l.accesos=10]="accesos",l[l.notificaciones=11]="notificaciones",l[l.serviciosGuardia=12]="serviciosGuardia",p;var l})()},56227:(j,w,m)=>{m.d(w,{P:()=>Fe});var p=m(24006),l=m(36517),f=m(42658),C=m(16469),h=m(92340),e=m(30551),R=m(12368),E=m(18328),s=m(80529);let V=(()=>{class n{constructor(t){this.http=t,this.apiUrl=h.N.apiUrl}getByResidentPlaceId(t){return this.http.post(`${this.apiUrl}/getAllSecundarioOtros_residenteLugar`,t)}create(t){return this.http.post(`${this.apiUrl}/insertSecundario_otros`,t)}delete(t){return this.http.post(`${this.apiUrl}/deleteSecundario_otros`,t)}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275inject(s.eN))},n.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var M=m(98914),T=m(36895);function L(n,c){1&n&&e.\u0275\u0275elementContainer(0)}function O(n,c){1&n&&e.\u0275\u0275elementContainer(0)}function A(n,c){1&n&&e.\u0275\u0275elementContainer(0)}function g(n,c){1&n&&e.\u0275\u0275elementContainer(0)}function y(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"nb-tab",15),e.\u0275\u0275template(1,g,1,0,"ng-container",11),e.\u0275\u0275elementEnd()),2&n){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(12);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngTemplateOutlet",t)}}function b(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"nb-card")(2,"nb-card-header",8)(3,"h5"),e.\u0275\u0275text(4,"Editar Residente"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"nb-card-body")(6,"nb-tabset",9)(7,"nb-tab",10),e.\u0275\u0275template(8,L,1,0,"ng-container",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"nb-tab",12),e.\u0275\u0275template(10,O,1,0,"ng-container",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"nb-tab",13),e.\u0275\u0275template(12,A,1,0,"ng-container",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(13,y,2,1,"nb-tab",14),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext(),r=e.\u0275\u0275reference(6),i=e.\u0275\u0275reference(8),d=e.\u0275\u0275reference(10);e.\u0275\u0275advance(8),e.\u0275\u0275property("ngTemplateOutlet",r),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngTemplateOutlet",i),e.\u0275\u0275advance(1),e.\u0275\u0275property("nbSpinner",t.isLoading),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngTemplateOutlet",d),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.isAccessTabActive)}}function k(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"button",25),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext();const i=e.\u0275\u0275reference(10);return e.\u0275\u0275resetView(i.previous())}),e.\u0275\u0275text(2,"Atr\xe1s"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("disabled",t.editMode)}}function B(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"button",26),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext();const i=e.\u0275\u0275reference(10);return e.\u0275\u0275resetView(i.next())}),e.\u0275\u0275text(2,"Siguiente"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("disabled",t.editMode)}}function D(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",27),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.approve())}),e.\u0275\u0275elementStart(1,"span",28),e.\u0275\u0275text(2,"check"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(3," Aprobar "),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("disabled",t.editMode)}}function $(n,c){1&n&&e.\u0275\u0275elementContainer(0)}function v(n,c){1&n&&e.\u0275\u0275elementContainer(0)}function F(n,c){1&n&&e.\u0275\u0275elementContainer(0)}function o(n,c){1&n&&e.\u0275\u0275elementContainer(0)}function a(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"nb-card")(1,"nb-card-header",8)(2,"h5"),e.\u0275\u0275text(3,"Aprobar Residente"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",16),e.\u0275\u0275template(5,k,3,1,"ng-container",17),e.\u0275\u0275template(6,B,3,1,"ng-container",17),e.\u0275\u0275template(7,D,4,1,"button",18),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(8,"nb-card-body")(9,"nb-stepper",19,20),e.\u0275\u0275listener("stepChange",function(i){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(d.handleStepChange(i))}),e.\u0275\u0275elementStart(11,"nb-step",21),e.\u0275\u0275template(12,$,1,0,"ng-container",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"nb-step",22),e.\u0275\u0275template(14,v,1,0,"ng-container",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"nb-step",23),e.\u0275\u0275template(16,F,1,0,"ng-container",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"nb-step",24),e.\u0275\u0275template(18,o,1,0,"ng-container",11),e.\u0275\u0275elementEnd()()()()}if(2&n){const t=e.\u0275\u0275nextContext(),r=e.\u0275\u0275reference(6),i=e.\u0275\u0275reference(8),d=e.\u0275\u0275reference(10),x=e.\u0275\u0275reference(12);e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",t.selectedStep>0),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",3!==t.selectedStep),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",3===t.selectedStep),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngTemplateOutlet",r),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngTemplateOutlet",i),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngTemplateOutlet",d),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngTemplateOutlet",x)}}function _(n,c){if(1&n&&e.\u0275\u0275element(0,"img",43),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("src",t.selectedResidentPicture,e.\u0275\u0275sanitizeUrl)}}function u(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1,"No tiene foto"),e.\u0275\u0275elementEnd())}function S(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",29)(2,"div",30)(3,"div",31)(4,"div"),e.\u0275\u0275template(5,_,1,1,"img",32),e.\u0275\u0275template(6,u,2,0,"span",17),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"a",33),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return i.showImageForm=!0,e.\u0275\u0275resetView(i.editMode=!0)}),e.\u0275\u0275element(8,"nb-icon",34),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(9,"div",35)(10,"div",36)(11,"div",37)(12,"div",38)(13,"span",39),e.\u0275\u0275text(14,"Nombres:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"span",40),e.\u0275\u0275text(16),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(17,"div",37)(18,"div",38)(19,"span",39),e.\u0275\u0275text(20,"Apellidos:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"span",40),e.\u0275\u0275text(22),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(23,"div",37)(24,"div",38)(25,"span",39),e.\u0275\u0275text(26,"C\xe9dula:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"span",40),e.\u0275\u0275text(28),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(29,"div",37)(30,"div",38)(31,"span",39),e.\u0275\u0275text(32,"Correo:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(33,"span",40),e.\u0275\u0275text(34),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(35,"div",37)(36,"div",38)(37,"span",39),e.\u0275\u0275text(38,"Celular:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(39,"span",40),e.\u0275\u0275text(40),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(41,"div",37)(42,"div",38)(43,"span",39),e.\u0275\u0275text(44,"Descripci\xf3n:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(45,"span",40),e.\u0275\u0275text(46),e.\u0275\u0275elementEnd()()()()()(),e.\u0275\u0275elementStart(47,"div",36)(48,"div",41)(49,"button",42),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.editMode=!0)}),e.\u0275\u0275text(50,"Editar"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd()}if(2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",t.selectedResidentPicture),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!t.selectedResidentPicture),e.\u0275\u0275advance(10),e.\u0275\u0275textInterpolate(t.resident.nombres),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(t.resident.apellidos),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(t.resident.cedula),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(t.resident.correo),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(t.resident.celular),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(t.resident.descripcion)}}const P=function(){return{standalone:!0}};function N(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"form",44)(2,"div",36)(3,"div",37)(4,"div",45)(5,"label",46),e.\u0275\u0275text(6,"Nombres"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(7,"input",47),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(8,"div",37)(9,"div",45)(10,"label",48),e.\u0275\u0275text(11,"Apellidos"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(12,"input",49),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(13,"div",37)(14,"div",45)(15,"label",50),e.\u0275\u0275text(16,"C\xe9dula"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(17,"input",51),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(18,"div",37)(19,"div",45)(20,"label",52),e.\u0275\u0275text(21,"Correo"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(22,"input",53),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(23,"div",37)(24,"div",45)(25,"label",54),e.\u0275\u0275text(26,"Sexo"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"nb-select",55)(28,"nb-option",56),e.\u0275\u0275text(29,"Seleccionar opci\xf3n"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(30,"nb-option",57),e.\u0275\u0275text(31,"FEMENINO"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(32,"nb-option",58),e.\u0275\u0275text(33,"MASCULINO"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(34,"div",37)(35,"div",45)(36,"label",59),e.\u0275\u0275text(37,"Fecha de nacimiento"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(38,"input",60),e.\u0275\u0275listener("ngModelChange",function(i){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(d.birthDate=i)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(39,"nb-datepicker",61,62),e.\u0275\u0275listener("dateChange",function(i){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(d.onDateChanged(i))}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(41,"div",37)(42,"div",45)(43,"label",63),e.\u0275\u0275text(44,"Nacionalidad"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(45,"input",64),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(46,"div",36)(47,"div",65)(48,"button",66),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.editMode=!1)}),e.\u0275\u0275text(49,"Cancelar"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(50,"button",42),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.updateResident())}),e.\u0275\u0275text(51,"Actualizar"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementContainerEnd()}if(2&n){const t=e.\u0275\u0275reference(40),r=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("formGroup",r.residentForm),e.\u0275\u0275advance(37),e.\u0275\u0275property("ngModel",r.birthDate)("ngModelOptions",e.\u0275\u0275pureFunction0(4,P))("nbDatepicker",t)}}function z(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"form",44)(2,"div",36)(3,"div",67),e.\u0275\u0275element(4,"img",43),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"div",36)(6,"div",68)(7,"div",45)(8,"input",69,70),e.\u0275\u0275listener("change",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275reference(9),d=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(d.loadFile(i.files))}),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(10,"div",36)(11,"div",65)(12,"button",66),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return i.showImageForm=!1,e.\u0275\u0275resetView(i.editMode=!1)}),e.\u0275\u0275text(13,"Cancelar"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"button",42),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.uploadImage())}),e.\u0275\u0275text(15,"Actualizar"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd()}if(2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("formGroup",t.pictureForm),e.\u0275\u0275advance(3),e.\u0275\u0275property("src",t.picture,e.\u0275\u0275sanitizeUrl)}}function H(n,c){if(1&n&&(e.\u0275\u0275template(0,S,51,8,"ng-container",17),e.\u0275\u0275template(1,N,52,5,"ng-container",17),e.\u0275\u0275template(2,z,16,2,"ng-container",17)),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",!t.editMode&&!t.showImageForm),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.editMode&&!t.showImageForm),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.showImageForm)}}function K(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div",36)(1,"div",76)(2,"span",39),e.\u0275\u0275text(3,"Correo"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div"),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd()()()),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(t.residenceForm.value.correo)}}function Q(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",73)(2,"div",36)(3,"div",74)(4,"span",39),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"div"),e.\u0275\u0275text(7),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(8,"div",74)(9,"span",39),e.\u0275\u0275text(10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div"),e.\u0275\u0275text(12),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(13,K,6,1,"div",75),e.\u0275\u0275elementStart(14,"div",36)(15,"div",76)(16,"span",39),e.\u0275\u0275text(17,"Descripci\xf3n"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"div"),e.\u0275\u0275text(19),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(t.primario),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.resident.nombre_primario),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(t.secundario),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.resident.nombre_secundario),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.dominio),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(t.residenceForm.value.descripcion)}}function Z(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"nb-option",85),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=c.$implicit;e.\u0275\u0275property("value",t.id_primario),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.nombre_primario," ")}}function J(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"nb-option",85),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=c.$implicit;e.\u0275\u0275property("value",t.id_secundario),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.nombre_secundario," ")}}function X(n,c){1&n&&(e.\u0275\u0275elementStart(0,"div",36)(1,"div",68)(2,"div",45)(3,"label",52),e.\u0275\u0275text(4,"Correo"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(5,"textarea",86),e.\u0275\u0275elementEnd()()())}function Y(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"form",77)(2,"div",36)(3,"div",37)(4,"div",45)(5,"label",78),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"nb-select",79),e.\u0275\u0275listener("selectedChange",function(i){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(d.onPrimarioChange(i))})("ngModelChange",function(i){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(d.selectedPrimario=i)}),e.\u0275\u0275template(8,Z,2,2,"nb-option",80),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(9,"div",37)(10,"div",45)(11,"label",81),e.\u0275\u0275text(12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"nb-select",82),e.\u0275\u0275template(14,J,2,2,"nb-option",80),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275template(15,X,6,0,"div",75),e.\u0275\u0275elementStart(16,"div",36)(17,"div",68)(18,"div",45)(19,"label",83),e.\u0275\u0275text(20,"Descripci\xf3n"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(21,"textarea",84),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementContainerEnd()}if(2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("formGroup",t.residenceForm),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(t.primario),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngModel",t.selectedPrimario)("ngModelOptions",e.\u0275\u0275pureFunction0(8,P)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",t.primarioList),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(t.secundario),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",t.secundarioList),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.dominio)}}function q(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",87),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.editMode=!0)}),e.\u0275\u0275text(1,"Editar"),e.\u0275\u0275elementEnd()}}function ee(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",66),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.editMode=!1)}),e.\u0275\u0275text(1,"Cancelar"),e.\u0275\u0275elementEnd()}}function te(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",87),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.updateResidentPlace())}),e.\u0275\u0275text(1,"Actualizar"),e.\u0275\u0275elementEnd()}}function ne(n,c){if(1&n&&(e.\u0275\u0275template(0,Q,20,6,"ng-container",17),e.\u0275\u0275template(1,Y,22,9,"ng-container",17),e.\u0275\u0275elementStart(2,"div",36)(3,"div",65),e.\u0275\u0275template(4,q,2,0,"button",71),e.\u0275\u0275template(5,ee,2,0,"button",72),e.\u0275\u0275template(6,te,2,0,"button",71),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",!t.editMode),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.editMode),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",!t.editMode),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.editMode),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.editMode)}}function ie(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"nb-checkbox",94),e.\u0275\u0275listener("checkedChange",function(i){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(d.selectAllPermissions(i,d.permissionList))}),e.\u0275\u0275text(1," Seleccionar todo "),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("checked",t.areAllPermissionsSelected)}}function oe(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",28),e.\u0275\u0275text(1,"check"),e.\u0275\u0275elementEnd())}function re(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",28),e.\u0275\u0275text(1,"close"),e.\u0275\u0275elementEnd())}const W=function(n){return{"read-only":n}};function se(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",96),e.\u0275\u0275template(2,oe,2,0,"span",97),e.\u0275\u0275template(3,re,2,0,"span",97),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(4,W,"A"!==t.estado)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","A"===t.estado),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","A"!==t.estado),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.permiso," ")}}function ae(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"nb-checkbox",94),e.\u0275\u0275listener("checkedChange",function(i){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext(2).$implicit,x=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(x.addOrRemovePermission(i,d.id_permiso))}),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275property("checked","A"===t.estado),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.permiso," ")}}function ce(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",28),e.\u0275\u0275text(1,"check"),e.\u0275\u0275elementEnd())}function le(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",28),e.\u0275\u0275text(1,"close"),e.\u0275\u0275elementEnd())}function de(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",96),e.\u0275\u0275template(2,ce,2,0,"span",97),e.\u0275\u0275template(3,le,2,0,"span",97),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(4,W,"A"!==t.estado)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","A"===t.estado),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","A"!==t.estado),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.nombre," ")}}function me(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"nb-checkbox",100),e.\u0275\u0275listener("checkedChange",function(i){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext().$implicit,x=e.\u0275\u0275nextContext(3).$implicit,I=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(I.addOrRemovePermission(i,x.id_permiso,d.id_permiso))}),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext().$implicit,r=e.\u0275\u0275nextContext(3).$implicit,i=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("checked","A"===t.estado)("disabled",!i.selectedPermissions.includes(r.id_permiso)),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.nombre," ")}}function pe(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div",95),e.\u0275\u0275template(1,de,5,6,"ng-container",17),e.\u0275\u0275template(2,me,2,3,"nb-checkbox",99),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(5);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!t.editMode),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.editMode)}}function _e(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,pe,3,2,"div",98),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",t.dependientes)}}function ue(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",95),e.\u0275\u0275template(2,se,5,6,"ng-container",17),e.\u0275\u0275template(3,ae,2,2,"nb-checkbox",90),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,_e,2,1,"ng-container",17),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext().$implicit,r=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!r.editMode),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",r.editMode),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.dependientes.length>0)}}function ge(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,ue,5,3,"ng-container",17),e.\u0275\u0275elementContainerEnd()),2&n){const t=c.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","E"!==t.estado)}}function he(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",87),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return i.editMode=!0,e.\u0275\u0275resetView(i.checkAllPermissionsSelected())}),e.\u0275\u0275text(1,"Editar"),e.\u0275\u0275elementEnd()}}function fe(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",66),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.editMode=!1)}),e.\u0275\u0275text(1,"Cancelar"),e.\u0275\u0275elementEnd()}}function xe(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",87),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.updatePermissions())}),e.\u0275\u0275text(1,"Actualizar"),e.\u0275\u0275elementEnd()}}function ve(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div",88)(1,"div",89),e.\u0275\u0275template(2,ie,2,1,"nb-checkbox",90),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(3,"div",36),e.\u0275\u0275template(4,ge,2,1,"ng-container",91),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"div",92)(6,"div",93),e.\u0275\u0275template(7,he,2,0,"button",71),e.\u0275\u0275template(8,fe,2,0,"button",72),e.\u0275\u0275template(9,xe,2,0,"button",71),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.editMode),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",t.permissionList),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",!t.editMode),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.editMode),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.editMode)}}function be(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"nb-option",85),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=c.$implicit;e.\u0275\u0275property("value",t.id_primario),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.nombre_primario," ")}}function Ce(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"nb-option",85),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=c.$implicit;e.\u0275\u0275property("value",t.id_secundario),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.nombre_secundario," ")}}function Se(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",36)(1,"div",37)(2,"div",45)(3,"label",104),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"nb-select",105),e.\u0275\u0275listener("selectedChange",function(i){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(d.onPrimarioChange(i))})("ngModelChange",function(i){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(d.selectedPrimarioOtro=i)}),e.\u0275\u0275template(6,be,2,2,"nb-option",80),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(7,"div",37)(8,"div",45)(9,"label",106),e.\u0275\u0275text(10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"nb-select",107),e.\u0275\u0275listener("ngModelChange",function(i){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(d.selectedSecundarioOtro=i)}),e.\u0275\u0275template(12,Ce,2,2,"nb-option",80),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(13,"div",36)(14,"div",65)(15,"button",108),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return i.showAccessForm=!1,e.\u0275\u0275resetView(i.editMode=!1)}),e.\u0275\u0275text(16,"Cancelar"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"button",87),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.createAccess())}),e.\u0275\u0275text(18,"Agregar"),e.\u0275\u0275elementEnd()()()}if(2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(t.primario),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngModel",t.selectedPrimarioOtro),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",t.primarioList),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(t.secundario),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngModel",t.selectedSecundarioOtro),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",t.secundarioList)}}function Ie(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"nb-list-item",111)(1,"div"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"button",112),e.\u0275\u0275listener("click",function(){const d=e.\u0275\u0275restoreView(t).$implicit,x=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(x.onDeleteAccess(d.id_secundario_otros))}),e.\u0275\u0275element(4,"i",113),e.\u0275\u0275elementEnd()()}if(2&n){const t=c.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate2("",t.nombre_primario,", ",t.nombre_secundario,"")}}function Re(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"nb-list",109),e.\u0275\u0275template(2,Ie,5,2,"nb-list-item",110),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",t.accessList)}}function ye(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",101)(1,"div",102)(2,"h5"),e.\u0275\u0275text(3,"Accesos autorizados"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"button",87),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return i.showAccessForm=!0,e.\u0275\u0275resetView(i.editMode=!0)}),e.\u0275\u0275text(5," Nuevo "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(6,Se,19,6,"ng-template",null,103,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(8,Re,3,1,"ng-container",2),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275reference(7),r=e.\u0275\u0275nextContext();e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",!r.showAccessForm)("ngIfElse",t)}}let Fe=(()=>{class n{constructor(t,r,i,d,x,I,U,Ee,we){this._formBuilder=t,this._placeService=r,this._residentService=i,this._additionalAccessService=d,this._toastrService=x,this._dialogRef=I,this._dialogService=U,this._menuService=Ee,this._cdRef=we,this.needApproval=!1,this.onlyPermissions=!1,this.editMode=!1,this.isLoading=!1,this.primarioList=[],this.secundarioList=[],this.accessList=[],this.permissionList=[],this.selectedPermissions=[],this.dominio=!1,this.showAccessForm=!1,this.isAccessTabActive=!1,this.storageUrl=h.N.storageUrl+"/Residentes",this.showImageForm=!1,this.areAllPermissionsSelected=!1,this.initResidentForm(),this.initResidenceForm(),this.initPictureForm();const G=this._placeService.place$;this.dominio=!!G.dominio,this.isAccessTabActive=this._menuService.isActive(G,C.t.accesos)}ngOnInit(){this.getResident(this.resident.id_residente),this.getPrimario(),this.getSecundario(this.resident.id_primario),this.selectedPrimario=this.resident.id_primario,this.residentForm.patchValue(this.resident),this.residenceForm.patchValue({id_secundario:this.resident.id_secundario,descripcion:this.resident.descripcion}),this.getPermissions(),this.getAccess()}initResidentForm(){this.residentForm=this._formBuilder.group({id_residente:["",p.kI.required],nombres:["",p.kI.required],apellidos:["",p.kI.required],correo:["",p.kI.required],cedula:["",p.kI.required],celular:["",p.kI.required],sexo:["",p.kI.required],fecha_nacimiento:["",p.kI.required],nacionalidad:["",p.kI.required],usuario_modificacion:["admin",p.kI.required]})}initResidenceForm(){this.residenceForm=this._formBuilder.group({id_secundario:["",p.kI.required],descripcion:["",p.kI.required],correo:[""],usuario_modificacion:["admin",p.kI.required]})}initPictureForm(){this.pictureForm=this._formBuilder.group({imagen:["",p.kI.required],id_residente:["",p.kI.required]})}getResident(t){this._residentService.getResidente({id_residente:t}).subscribe({next:i=>{this.selectedResidentPicture=i.foto?`${this.storageUrl}/${i.foto}?timestamp${(new Date).getTime()}`:null,this.pictureForm.patchValue({id_residente:i.id_residente}),this.residenceForm.patchValue(i),this.residentForm.patchValue({sexo:i.sexo,nacionalidad:i.nacionalidad,fecha_nacimiento:i.fecha_nacimiento}),i.fecha_nacimiento&&(this.birthDate=this.getDate(i.fecha_nacimiento))},error:()=>{this.showToast("danger","Ha ocurrido un error al cargar el residente")}})}getDate(t){const r=t.split("-"),i=parseInt(r[0]),d=parseInt(r[1]),x=parseInt(r[2]);return new Date(i,d-1,x)}onDateChanged(t){this.residentForm.patchValue({fecha_nacimiento:t.toISOString().substring(0,10)})}getPrimario(){this._placeService.getPrimarios({id_usuario:1,id_lugar:this.resident.id_lugar}).subscribe({next:r=>{this.primarioList=r}})}getSecundario(t){this._placeService.getSecundarios({id_usuario:1,id_primario:t}).subscribe({next:i=>{this.secundarioList=i}})}onPrimarioChange(t){this.residenceForm.patchValue({id_secundario:null}),this.getSecundario(t)}updateResident(){this._residentService.updateResidente(this.residentForm.value).subscribe({next:()=>{this.resident.nombres=this.residentForm.value.nombres,this.resident.apellidos=this.residentForm.value.apellidos,this.resident.cedula=this.residentForm.value.cedula,this.resident.correo=this.residentForm.value.correo,this.showToast("success","Residente actualizado")},error:()=>{this.showToast("danger","Error al actualizar")}})}updateResidentPlace(){const{correo:t,...r}=this.residenceForm.value,i={id_residente_lugar:this.resident.id_residente_lugar,id_residente:this.resident.id_residente,...r};this.dominio&&(i.correo=t),this._residentService.updateResidenteLugar(i).subscribe({next:()=>{this.showToast("success","Residencia actualizada")},error:()=>{this.showToast("danger","Error al actualizar")},complete:()=>this.editMode=!1})}getPermissions(){this.isLoading=!0,this._residentService.getPermissions({id_residente_lugar:this.resident.id_residente_lugar,id_lugar:this.resident.id_lugar}).subscribe({next:r=>{this.permissionList=r.filter(i=>"E"!=i.estado),this.permissionList.map(i=>{"A"==i.estado&&(this.selectedPermissions.push(i.id_permiso),i.dependientes?.map(d=>{"A"==d.estado&&this.selectedPermissions.push(d.id_permiso)}))}),this.isLoading=!1}})}addOrRemovePermission(t,r,i){const d=t?"A":"I";this.permissionList=this.permissionList.map(x=>(x.id_permiso==r&&(i?(t?this.selectedPermissions.push(i):this.selectedPermissions=this.selectedPermissions.filter(I=>I!=i),x.dependientes=x.dependientes.map(I=>(I.id_permiso==i&&(I.estado=d),I))):(t?this.selectedPermissions.push(r):(this.selectedPermissions=this.selectedPermissions.filter(I=>I!=x.id_permiso),x.dependientes=x.dependientes.map(I=>(this.selectedPermissions=this.selectedPermissions.filter(U=>U!=I.id_permiso),I.estado=d,I))),x.estado=d)),x)),this.checkAllPermissionsSelected()}updatePermissions(){const t={id_residente_lugar:this.resident.id_residente_lugar,lista:this.selectedPermissions.sort((r,i)=>r-i),usuario_modificacion:"admin"};this._residentService.updatePermissions(t).subscribe({next:()=>{this.showToast("success","Permisos actualizados")},error:()=>{this.showToast("danger","Error al actualizar")},complete:()=>this.editMode=!1})}getAccess(){this._additionalAccessService.getByResidentPlaceId({id_residente_lugar:this.resident.id_residente_lugar}).subscribe({next:r=>{this.accessList=r}})}approve(){this._dialogRef.close(!0)}createAccess(){this._additionalAccessService.create({id_residente_lugar:this.resident.id_residente_lugar,id_secundario:this.selectedSecundarioOtro,usuario_creacion:"admin"}).subscribe({next:r=>{this.accessList.push(r),this.showAccessForm=!1,this.showToast("success","Acceso autorizado")},error:r=>{this.showToast("danger",r.error.causa)},complete:()=>this.editMode=!1})}onDeleteAccess(t){this._dialogService.open(f.S,{context:{title:"\xbfEst\xe1 seguro de borrar el registro?"}}).onClose.subscribe({next:r=>{r&&this.deleteAccess(t)}})}deleteAccess(t){this._additionalAccessService.delete({id_secundario_otros:t,usuario_modificacion:"admin"}).subscribe({next:i=>{this.accessList=this.accessList.filter(d=>d.id_secundario_otros!=t),this.showToast("success","Registro eliminado")},error:i=>{this.showToast("danger",i.error.causa)}})}loadFile(t){if(!t.length)return;const r=t[0],i=new FileReader;i.onload=()=>{this.pictureForm.patchValue({imagen:r}),this.picture=i.result,this._cdRef.detectChanges()},i.readAsDataURL(r)}uploadImage(){const t=new FormData;t.append("imagen",this.pictureForm.value.imagen),t.append("id_residente",this.pictureForm.value.id_residente),this._residentService.updatePicture(t).subscribe({next:r=>{this.showToast("success","Imagen actualizada"),this.showImageForm=!1,this.selectedResidentPicture=`${this.storageUrl}/${r.imagen}`,this.picture=null,this._cdRef.detectChanges()},error:r=>{this.showToast("danger","Error al subir la imagen")},complete:()=>this.editMode=!1})}handleStepChange(t){this.selectedStep=t.index}checkAllPermissionsSelected(){const t=this.permissionList.find(r=>{if("A"!=r.estado||r.dependientes?.find(d=>{if("A"!=d.estado)return d}))return r});this.areAllPermissionsSelected=!t}selectAllPermissions(t){const r=t?"A":"I";let i=[];this.permissionList.map(d=>{d.estado=r,t&&i.push(d.id_permiso),d.dependientes?.map(x=>{x.estado=r,t&&i.push(x.id_permiso)})}),this.selectedPermissions=i,console.log(this.selectedPermissions)}showToast(t,r){this._toastrService.show("",r,{status:t,destroyByClick:!0,duration:3e3,hasIcon:!1,position:l.fe3.TOP_RIGHT,preventDuplicates:!0})}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(p.qu),e.\u0275\u0275directiveInject(R.k),e.\u0275\u0275directiveInject(E.B),e.\u0275\u0275directiveInject(V),e.\u0275\u0275directiveInject(l.quB),e.\u0275\u0275directiveInject(l.X4l),e.\u0275\u0275directiveInject(l.Gln),e.\u0275\u0275directiveInject(M.h),e.\u0275\u0275directiveInject(e.ChangeDetectorRef))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["ngx-resident-form"]],inputs:{resident:"resident",primario:"primario",secundario:"secundario",needApproval:"needApproval"},decls:13,vars:2,consts:[[1,"row","detail-container"],[1,"col-lg-12"],[4,"ngIf","ngIfElse"],["approveResident",""],["informacion",""],["residencia",""],["permisos",""],["accesos",""],[1,"w-100","d-flex","justify-content-between"],["fullWidth",""],["tabTitle","Informaci\xf3n"],[4,"ngTemplateOutlet"],["tabTitle","Residencia"],["tabTitle","Permisos",3,"nbSpinner"],["tabTitle","Accesos",4,"ngIf"],["tabTitle","Accesos"],[1,"d-flex"],[4,"ngIf"],["nbButton","","status","success",3,"disabled","click",4,"ngIf"],["orientation","horizontal",3,"stepChange"],["stepper",""],["label","Informaci\xf3n"],["label","Residencia"],["label","Permisos"],["label","Accesos"],["nbButton","",1,"mr-2",3,"disabled","click"],["nbButton","",3,"disabled","click"],["nbButton","","status","success",3,"disabled","click"],[1,"material-symbols-outlined"],[1,"row","mb-4"],[1,"col-md-3","d-flex","flex-column"],[1,"picture-container"],["width","100","height","auto","alt","",3,"src",4,"ngIf"],[3,"click"],["icon","edit"],[1,"col-md-7"],[1,"row"],[1,"col-md-6"],[1,"detail","py-1"],[1,"label"],[1,"d-block"],[1,"col-md-12","d-flex","justify-content-center"],["nbButton","","status","info","hero","",3,"click"],["width","100","height","auto","alt","",3,"src"],[1,"mt-2",3,"formGroup"],[1,"form-group"],["for","inputNombres",1,"label"],["nbInput","","fullWidth","","type","text","formControlName","nombres"],["for","inputApellidos",1,"label"],["nbInput","","fullWidth","","type","text","formControlName","apellidos"],["for","inputCedula",1,"label"],["nbInput","","fullWidth","","type","text","formControlName","cedula"],["for","inputCorreo",1,"label"],["nbInput","","fullWidth","","type","email","formControlName","correo"],["for","inputSexo",1,"label"],["fullWidth","","name","inputSexo","status","primary","formControlName","sexo",1,"w-100"],["selected","","disabled",""],["value","FEMENINO"],["value","MASCULINO"],["for","inputFechaNacimiento",1,"label"],["nbInput","","fullWidth","",3,"ngModel","ngModelOptions","nbDatepicker","ngModelChange"],[3,"dateChange"],["datepicker",""],["for","inputNacionalidad",1,"label"],["nbInput","","fullWidth","","type","text","formControlName","nacionalidad"],[1,"col-md-12","mt-2","d-flex","justify-content-center"],["nbButton","","ghost","",1,"mr-2",3,"click"],[1,"col-md-2"],[1,"col-md-12"],["id","inputPicture","type","file","fullWidth","",1,"pl-2",3,"change"],["fileControl",""],["nbButton","","status","info",3,"click",4,"ngIf"],["nbButton","","ghost","","class","mr-2",3,"click",4,"ngIf"],[1,"mb-4"],[1,"col-md-6","py-1"],["class","row",4,"ngIf"],[1,"col-md-12","py-1"],[1,"mt-2","mb-4",3,"formGroup"],["for","inputPrimario",1,"label"],["fullWidth","","id","inputPrimario",3,"ngModel","ngModelOptions","selectedChange","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["for","inputSecundario",1,"label"],["fullWidth","","id","inputSecundario","formControlName","id_secundario","placeholder","Seleccionar una opci\xf3n"],["for","inputDescripcion",1,"label"],["nbInput","","fullWidth","","type","text","formControlName","descripcion"],[3,"value"],["nbInput","","fullWidth","","type","text","formControlName","correo"],["nbButton","","status","info",3,"click"],[1,"row","py-2"],[1,"col-12"],[3,"checked","checkedChange",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"row","pt-1"],[1,"col-12","mt-2","d-flex","justify-content-center"],[3,"checked","checkedChange"],[1,"col-6","py-1"],[1,"my-1",3,"ngClass"],["class","material-symbols-outlined",4,"ngIf"],["class","col-6 py-1",4,"ngFor","ngForOf"],[3,"checked","disabled","checkedChange",4,"ngIf"],[3,"checked","disabled","checkedChange"],[1,"row","pt-4"],[1,"d-flex","justify-content-between","w-100"],["accessForm",""],["for","inputPrimarioOtro",1,"label"],["fullWidth","","id","inputPrimarioOtro","placeholder","Seleccionar una opci\xf3n",3,"ngModel","selectedChange","ngModelChange"],["for","inputSecundarioOtro",1,"label"],["fullWidth","","id","inputSecundarioOtro","placeholder","Seleccionar una opci\xf3n",3,"ngModel","ngModelChange"],["nbButton","","ghost","",3,"click"],[1,"d-flex","flex-column","w-100","pt-4",2,"max-height","450px","overflow-y","auto"],["class","d-flex justify-content-between align-items-center",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","align-items-center"],["nbButton","","ghost","","size","large",1,"delete-button",3,"click"],[1,"nb-trash"]],template:function(t,r){if(1&t&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1),e.\u0275\u0275template(2,b,14,5,"ng-container",2),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(3,a,19,7,"ng-template",null,3,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(5,H,3,3,"ng-template",null,4,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(7,ne,7,5,"ng-template",null,5,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(9,ve,10,5,"ng-template",null,6,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(11,ye,9,2,"ng-template",null,7,e.\u0275\u0275templateRefExtractor)),2&t){const i=e.\u0275\u0275reference(4);e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!r.needApproval)("ngIfElse",i)}},dependencies:[T.mk,T.sg,T.O5,T.tP,p._Y,p.Fj,p.JJ,p.JL,p.On,p.sg,p.u,l.Asz,l.yKW,l.ndF,l.h8i,l.DPz,l.rs,l.q51,l.fMN,l.kyn,l.TR4,l.NTf,l.Q7R,l.$kf,l.B4C,l.TLo,l.Sv4],styles:[".detail-container[_ngcontent-%COMP%]{width:700px}.delete-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:24px}.picture-container[_ngcontent-%COMP%]{position:relative;max-width:100px;height:100px;display:flex;align-items:center;justify-content:center}.picture-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{border-radius:50%;box-shadow:1px 2px 5px -2px #969696;width:100px;height:100px;overflow:hidden;display:flex;align-items:center;justify-content:center}.picture-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{cursor:pointer;position:absolute;bottom:-5px;right:-5px;border-radius:50%;padding:3px;color:#fff;background-color:#0496ff;box-shadow:0 1px 5px -2px #969696}.read-only[_ngcontent-%COMP%]{color:#969696}"]}),n})()},78433:(j,w,m)=>{m.d(w,{o:()=>$});var p=m(15861),l=m(74385),f=m(36517),C=m(42658),h=m(36749),e=m(56227),R=m(68360),E=m(80574),s=m(30551),V=m(12013);let M=(()=>{class v{constructor(o){this._notificationService=o,this.settings={actions:{position:"right",add:!1,edit:!1,delete:!1,custom:[]},columns:{nombre:{title:"T\xedtulo",type:"string",filter:!0},descripcion:{title:"Descripci\xf3n",type:"string",filter:!0},fecha_creacion:{title:"Fecha",type:"string",filter:!0},tipo:{title:"Tipo",type:"string",filter:!0}}},this.notificationsList=[],this.source=new l.nC}ngOnInit(){this.getNotifications(this.residentId,this.placeId)}getNotifications(o,a){this._notificationService.getByResident({id_residente:o,id_lugar:a}).subscribe({next:u=>{this.source.load(u)},error:u=>{console.error(u)}})}}return v.\u0275fac=function(o){return new(o||v)(s.\u0275\u0275directiveInject(V.g))},v.\u0275cmp=s.\u0275\u0275defineComponent({type:v,selectors:[["ngx-notifications-list"]],inputs:{residentId:"residentId",placeId:"placeId"},decls:6,vars:2,consts:[[1,"w-100","d-flex","justify-content-between"],[1,"custom-table",3,"settings","source"]],template:function(o,a){1&o&&(s.\u0275\u0275elementStart(0,"nb-card")(1,"nb-card-header",0)(2,"h5"),s.\u0275\u0275text(3,"Notificaciones"),s.\u0275\u0275elementEnd()(),s.\u0275\u0275elementStart(4,"nb-card-body"),s.\u0275\u0275element(5,"ng2-smart-table",1),s.\u0275\u0275elementEnd()()),2&o&&(s.\u0275\u0275advance(5),s.\u0275\u0275property("settings",a.settings)("source",a.source))},dependencies:[f.Asz,f.yKW,f.ndF,l.T5]}),v})();var T=m(7672),L=m(18328),O=m(12368),A=m(36895),g=m(94176);const y=["stepper"],b=["password"];function k(v,F){if(1&v&&(s.\u0275\u0275elementStart(0,"nb-option",14),s.\u0275\u0275text(1),s.\u0275\u0275elementEnd()),2&v){const o=F.$implicit,a=s.\u0275\u0275nextContext(2);s.\u0275\u0275property("value",o),s.\u0275\u0275advance(1),s.\u0275\u0275textInterpolate1(" ",a.statusList[o]," ")}}function B(v,F){if(1&v){const o=s.\u0275\u0275getCurrentView();s.\u0275\u0275elementContainerStart(0),s.\u0275\u0275elementStart(1,"nb-select",12),s.\u0275\u0275listener("selectedChange",function(_){s.\u0275\u0275restoreView(o);const u=s.\u0275\u0275nextContext();return s.\u0275\u0275resetView(u.getResidents(u.placeId,_))}),s.\u0275\u0275template(2,k,2,2,"nb-option",13),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementContainerEnd()}if(2&v){const o=s.\u0275\u0275nextContext();s.\u0275\u0275advance(1),s.\u0275\u0275property("selected",o.selectedStatus),s.\u0275\u0275advance(1),s.\u0275\u0275property("ngForOf",o.status)}}function D(v,F){if(1&v&&(s.\u0275\u0275elementStart(0,"div",15)(1,"h6"),s.\u0275\u0275text(2,"Clave temporal del usuario"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(3,"p",16),s.\u0275\u0275text(4),s.\u0275\u0275elementEnd()()),2&v){const o=F.$implicit;s.\u0275\u0275advance(4),s.\u0275\u0275textInterpolate(o)}}let $=(()=>{class v{constructor(o,a,_,u,S,P){this._router=o,this._activatedRoute=a,this._dialogService=_,this._toastrService=u,this._residentService=S,this._placeService=P,this.status=["T"],this.primario="Primario",this.secundario="Secundario",this.statusList={T:"Todos",A:"Activo",P:"Pendiente",I:"Inactivo",R:"Rechazado",E:"Eliminado"},this.customActions={notifications:{name:"notifications",title:'<i class="nb-icon far fa-bell"></i>'},approve:{name:"approve",title:'<i class="nb-checkmark" title="Aprobar"></i>'},decline:{name:"decline",title:'<i class="nb-close" title="Rechazar"></i>'},edit:{name:"edit",title:'<i class="nb-edit"></i>'},delete:{name:"delete",title:'<i class="nb-trash"></i>'},resetPassword:{name:"resetPassword",title:'<img src="./assets/images/key-outline.svg" title="Restablecer contrase\xf1a">'},logout:{name:"logout",title:'<img src="./assets/images/log-out-outline.svg" title="Cerrar sesi\xf3n">'},verify:{name:"verify",title:'<img src="./assets/images/person-done-outline.svg" title="Verificar">'},sendVerificationEmail:{name:"sendVerificationEmail",title:'<i class="nb-email" title="Enviar correo de verificaci\xf3n"></i>'},updatePlace:{name:"updatePlace",title:'<i class="nb-home" title="Solicitar actualizaci\xf3n de lugar"></i>'},updateInfo:{name:"updateInfo",title:'<i class="nb-list" title="Solicitar actualizaci\xf3n de informaci\xf3n"></i>'},accessReport:{name:"accessReport",title:'<img src="./assets/images/checklist.svg" title="Reporte de ingreso">'}},this.settings={actions:{position:"right",add:!1,edit:!1,delete:!1,custom:[]},columns:{nombres:{title:"Nombres",type:"string",filter:!0},apellidos:{title:"Apellidos",type:"string",filter:!0},cedula:{title:"Cedula",type:"string",filter:!0},correo:{title:"Correo",type:"string",filter:!0},celular:{title:"Celular",type:"string",filter:!0},nombre_primario:{title:this.primario,type:"string",filter:!0},nombre_secundario:{title:this.secundario,type:"string",filter:!0},descripcion:{title:"Descripci\xf3n",type:"string",filter:!0},tiene_foto:{title:"Tiene foto",type:"string",filter:!0}}},this.residentsList=[],this.source=new l.nC;const N=this._activatedRoute.parent.snapshot.paramMap.get("placeId");N&&(this.placeId=parseInt(N));const z=this._activatedRoute.snapshot.data.status;z&&(this.status=z)}ngOnInit(){this._placeService.getPlace({id_lugar:this.placeId}).subscribe(o=>{this.primario=o.primario,this.secundario=o.secundario}),this.selectedStatus=this.status[0],this.getResidents(this.placeId,this.selectedStatus),this.setActions()}setActions(){var o=this;switch(this.settings.actions.custom=[],this.selectedStatus){case"P":this.settings.actions.custom.push(this.customActions.approve),this.settings.actions.custom.push(this.customActions.decline);break;case"A":this.settings.actions.custom.push(this.customActions.notifications,this.customActions.accessReport,this.customActions.updatePlace,this.customActions.updateInfo,this.customActions.logout,this.customActions.resetPassword,this.customActions.edit,this.customActions.delete),this.settings.columns.estado={title:"Estado",type:"custom",renderComponent:h.P,onComponentInitFunction:a=>{a.toggle.subscribe(function(){var _=(0,p.Z)(function*(u){const S=u.value?"A":"I";yield o.updateStatus(u.row.id_residente_lugar,S),o.getResidents(o.placeId,o.selectedStatus)});return function(u){return _.apply(this,arguments)}}())},filter:!1};break;case"I":case"R":case"E":this.settings.actions.custom.push(this.customActions.approve),this.settings.actions.custom.push(this.customActions.delete);break;default:this.settings.columns.estado={title:"Estado",type:"custom",renderComponent:h.P,onComponentInitFunction:a=>{a.type="string"},filter:!1}}}getResidents(o,a){var S,_=this;this.selectedStatus=a,this.secundarioId?this._residentService.getBySecundario({id_secundario:this.secundarioId}).subscribe({next:u=>{this.residentsList=u,this.source.load(u)},error:u=>{console.error(u)}}):this._residentService.getByPlace({id_lugar:o,estado:a}).subscribe({next:(S=(0,p.Z)(function*(P){_.residentsList=yield _.validatePicture(P),_.source.load(_.residentsList)}),function(N){return S.apply(this,arguments)}),error:S=>{console.error(S)}})}validatePicture(o){return new Promise(a=>{o.forEach(_=>{_.tiene_foto=_.foto?"S\xed":"No"}),a(o)})}onCustom(o){switch(o.action){case"edit":this._dialogService.open(e.P,{context:{resident:o.data,primario:this.primario,secundario:this.secundario}}).onClose.subscribe(()=>{this.getResidents(this.placeId,this.selectedStatus)});break;case"delete":"A"==this.selectedStatus?this.onUpdateStatus(o.data.id_residente_lugar,"E"):this.onDelete(o.data.id_residente_lugar);break;case"notifications":this.onShowNotifications(o.data.id_residente);break;case"approve":this.onApprove(o.data,"A");break;case"decline":this.onUpdateStatus(o.data.id_residente_lugar,"R");break;case"resetPassword":this.onResetPassword(o.data.id_residente);break;case"logout":this.onResidentLogout(o.data.id_residente);break;case"verify":this.onVerify(o.data.id_residente);break;case"sendVerificationEmail":this.onSendVerificationEmail(o.data.id_residente);break;case"updatePlace":this.onUpdatePlace(o.data.id_residente_lugar);break;case"updateInfo":this.onUpdateInfo(o.data.id_residente);break;case"accessReport":this.stepperComponent.next(),this.selectedResidentId=o.data.id_residente,this.selectedResidentPlaceId=o.data.id_residente_lugar}}add(){this._router.navigate(["/pages/residentes/crear"])}onDelete(o){this._dialogService.open(C.S,{context:{title:"\xbfEst\xe1 seguro de eliminar el registro?"}}).onClose.subscribe({next:a=>{a&&this.deleteResident(o)}})}deleteResident(o){this._residentService.delete({id_residente_lugar:o,usuario_modificacion:"admin"}).subscribe({next:()=>{this.showToast("success","Residente eliminado"),this.getResidents(this.placeId,this.selectedStatus)},error:()=>{this.showToast("danger","Error al eliminar el residente")}})}onShowNotifications(o){this._dialogService.open(M,{context:{residentId:o,placeId:this.placeId}})}onApprove(o,a){var _=this;this._dialogService.open(e.P,{context:{resident:o,primario:this.primario,secundario:this.secundario,needApproval:!0}}).onClose.subscribe(function(){var u=(0,p.Z)(function*(S){S&&(yield _.updateStatus(o.id_residente_lugar,a),_.getResidents(_.placeId,_.selectedStatus))});return function(S){return u.apply(this,arguments)}}())}onUpdateStatus(o,a){var u,_=this;this._dialogService.open(C.S,{context:{title:"\xbfEst\xe1 seguro de actualizar el estado del registro?"}}).onClose.subscribe({next:(u=(0,p.Z)(function*(S){S&&(yield _.updateStatus(o,a),_.getResidents(_.placeId,_.selectedStatus))}),function(P){return u.apply(this,arguments)})})}updateStatus(o,a){return new Promise(_=>{this._residentService.updateStatus({id_residente_lugar:o,estado:a,usuario_modificacion:"admin"}).subscribe({next:()=>{this.showToast("success","Estado actualizado")},error:()=>{this.showToast("danger","Ha ocurrido un error. Intente nuevamente")},complete:()=>{setTimeout(()=>{_()},0)}})})}onResetPassword(o){this._dialogService.open(C.S,{context:{title:"\xbfEst\xe1 seguro de restablecer la contrase\xf1a del residente?"}}).onClose.subscribe({next:a=>{a&&this.resetPassword(o)}})}resetPassword(o){this._residentService.resetPassword({id_residente:o,usuario_modificacion:"admin"}).subscribe({next:_=>{this._dialogService.open(this.dialog,{context:_.clave})},error:()=>{this.showToast("danger","Ha ocurrido un error. Intente nuevamente")}})}onResidentLogout(o){this._dialogService.open(C.S,{context:{title:"\xbfEst\xe1 seguro de cerrar la sesi\xf3n del residente?"}}).onClose.subscribe({next:a=>{a&&this.residentLogout(o)}})}residentLogout(o){this._residentService.residentLogout({id_residente:o,usuario_modificacion:"admin"}).subscribe({next:()=>{this.showToast("success","Sesi\xf3n finalizada")},error:()=>{this.showToast("danger","Ha ocurrido un error. Intente nuevamente")}})}onVerify(o){this._dialogService.open(C.S,{context:{title:"\xbfEst\xe1 seguro de verificar la cuenta del residente?"}}).onClose.subscribe({next:a=>{a&&this.verify(o)}})}verify(o){this._residentService.verify({id_residente:o,usuario_modificacion:"admin"}).subscribe({next:()=>{this.showToast("success","Cuenta verificada")},error:()=>{this.showToast("danger","Ha ocurrido un error. Intente nuevamente")}})}onSendVerificationEmail(o){this._dialogService.open(C.S,{context:{title:"\xbfEst\xe1 seguro de enviar el correo de verificaci\xf3n al residente?"}}).onClose.subscribe({next:a=>{a&&this.sendVerificationEmail(o)}})}sendVerificationEmail(o){this._residentService.sendVerificationEmail({id_residente:o,usuario_modificacion:"admin"}).subscribe({next:()=>{this.showToast("success","Correo enviado")},error:()=>{this.showToast("danger","Ha ocurrido un error. Intente nuevamente")}})}onUpdatePlace(o){this._dialogService.open(C.S,{context:{title:"\xbfEst\xe1 seguro de solicitar la actualizaci\xf3n de lugar?"}}).onClose.subscribe({next:a=>{a&&this.updatePlace(o)}})}updatePlace(o){this._residentService.updatePlace({id_residente_lugar:o,estado:"S",usuario_modificacion:"admin"}).subscribe({next:()=>{this.showToast("success","Solicitud establecida")},error:()=>{this.showToast("danger","Ha ocurrido un error. Intente nuevamente")}})}onUpdateInfo(o){this._dialogService.open(C.S,{context:{title:"\xbfEst\xe1 seguro de solicitar la actualizaci\xf3n de informaci\xf3n?"}}).onClose.subscribe({next:a=>{a&&this.updateInfo(o)}})}updateInfo(o){this._residentService.updateInfo({id_residente:o,estado:"P",usuario_modificacion:"admin"}).subscribe({next:()=>{this.showToast("success","Solicitud establecida")},error:()=>{this.showToast("danger","Ha ocurrido un error. Intente nuevamente")}})}showToast(o,a){this._toastrService.show("",a,{status:o,destroyByClick:!0,duration:3e3,hasIcon:!1,position:f.fe3.TOP_RIGHT,preventDuplicates:!0})}getTable(){return new Promise(o=>{const a=[];this.residentsList.forEach(_=>{let u=new R.oB(_);a.push(u)}),setTimeout(()=>{o(a)},0)})}downloadReport(){var o=this;return(0,p.Z)(function*(){const a=yield o.getTable(),_=E.P6.json_to_sheet(a),u=E.P6.book_new();E.P6.book_append_sheet(u,_,"SheetName"),E.NC(u,"residentes.xlsx")})()}}return v.\u0275fac=function(o){return new(o||v)(s.\u0275\u0275directiveInject(T.F0),s.\u0275\u0275directiveInject(T.gz),s.\u0275\u0275directiveInject(f.Gln),s.\u0275\u0275directiveInject(f.quB),s.\u0275\u0275directiveInject(L.B),s.\u0275\u0275directiveInject(O.k))},v.\u0275cmp=s.\u0275\u0275defineComponent({type:v,selectors:[["ngx-residents-list"]],viewQuery:function(o,a){if(1&o&&(s.\u0275\u0275viewQuery(y,5),s.\u0275\u0275viewQuery(b,5)),2&o){let _;s.\u0275\u0275queryRefresh(_=s.\u0275\u0275loadQuery())&&(a.stepperComponent=_.first),s.\u0275\u0275queryRefresh(_=s.\u0275\u0275loadQuery())&&(a.dialog=_.first)}},inputs:{placeId:"placeId",secundarioId:"secundarioId",status:"status",primario:"primario",secundario:"secundario"},decls:19,vars:7,consts:[["orientation","horizontal",3,"disableStepNavigation"],["stepper",""],["label","Residentes"],[1,"w-100","d-flex","justify-content-between"],[1,"d-flex"],[4,"ngIf"],["nbButton","","hero","","status","success",3,"disabled","click"],[1,"material-symbols-outlined"],[1,"custom-table",3,"settings","source","custom"],["label","Ingresos"],[3,"residentId","residentPlaceId","back"],["password",""],["status","basic",1,"pr-4",3,"selected","selectedChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"password-container"],[1,"text-center","pt-3"]],template:function(o,a){1&o&&(s.\u0275\u0275elementStart(0,"nb-stepper",0,1)(2,"nb-step",2)(3,"nb-card")(4,"nb-card-header",3)(5,"h5"),s.\u0275\u0275text(6,"Residentes"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(7,"div",4),s.\u0275\u0275template(8,B,3,2,"ng-container",5),s.\u0275\u0275elementStart(9,"button",6),s.\u0275\u0275listener("click",function(){return a.downloadReport()}),s.\u0275\u0275elementStart(10,"span",7),s.\u0275\u0275text(11,"download"),s.\u0275\u0275elementEnd(),s.\u0275\u0275text(12," Descargar "),s.\u0275\u0275elementEnd()()(),s.\u0275\u0275elementStart(13,"nb-card-body")(14,"ng2-smart-table",8),s.\u0275\u0275listener("custom",function(u){return a.onCustom(u)}),s.\u0275\u0275elementEnd()()()(),s.\u0275\u0275elementStart(15,"nb-step",9)(16,"ngx-access-report-table",10),s.\u0275\u0275listener("back",function(){return a.stepperComponent.previous()}),s.\u0275\u0275elementEnd()()(),s.\u0275\u0275template(17,D,5,1,"ng-template",null,11,s.\u0275\u0275templateRefExtractor)),2&o&&(s.\u0275\u0275property("disableStepNavigation",!0),s.\u0275\u0275advance(8),s.\u0275\u0275property("ngIf",a.status.length>1),s.\u0275\u0275advance(1),s.\u0275\u0275property("disabled",!a.residentsList||0===a.residentsList.length),s.\u0275\u0275advance(5),s.\u0275\u0275property("settings",a.settings)("source",a.source),s.\u0275\u0275advance(2),s.\u0275\u0275property("residentId",a.selectedResidentId)("residentPlaceId",a.selectedResidentPlaceId))},dependencies:[A.sg,A.O5,f.Asz,f.yKW,f.ndF,l.T5,f.DPz,f.rs,f.q51,f.TLo,f.Sv4,g.y],styles:["[_nghost-%COMP%]     nb-stepper .header{display:none}[_nghost-%COMP%]     [nbButton].appearance-ghost.status-basic:hover, .appearance-ghost.status-basic[nbButtonToggle][_ngcontent-%COMP%]:hover{background-color:transparent}[_nghost-%COMP%]     nb-stepper .step-content{padding:0}[_nghost-%COMP%]     tr .ng2-smart-actions{height:auto}[_nghost-%COMP%]     ng2-st-tbody-custom{display:flex;align-items:center}[_nghost-%COMP%]     ng2-st-tbody-custom a.ng2-smart-action.ng2-smart-action-custom-custom{display:flex;align-items:center;text-align:center}[_nghost-%COMP%]     ng2-st-tbody-custom a.ng2-smart-action.ng2-smart-action-custom-custom img{width:22px;filter:contrast(.3)}.password-container[_ngcontent-%COMP%]{padding:20px;background-color:#fff}"]}),v})()},39263:(j,w,m)=>{m.r(w),m.d(w,{ResidentsModule:()=>A});var p=m(36517),l=m(74385),f=m(7672),C=m(56227),h=m(30551);let e=(()=>{class g{constructor(){}}return g.\u0275fac=function(b){return new(b||g)},g.\u0275cmp=h.\u0275\u0275defineComponent({type:g,selectors:[["ngx-residents"]],decls:1,vars:0,template:function(b,k){1&b&&h.\u0275\u0275element(0,"router-outlet")},dependencies:[f.lC],encapsulation:2}),g})();var R=m(20732),E=m(78433);const V=[{path:"",component:e,children:[{path:"",component:(()=>{class g{constructor(b){this._activatedRoute=b;const k=this._activatedRoute.parent.parent.parent.snapshot.paramMap.get("placeId");k&&(this.placeId=parseInt(k)),this.status=this._activatedRoute.snapshot.data.status}}return g.\u0275fac=function(b){return new(b||g)(h.\u0275\u0275directiveInject(f.gz))},g.\u0275cmp=h.\u0275\u0275defineComponent({type:g,selectors:[["ngx-index"]],decls:2,vars:2,consts:[[3,"placeId","status"]],template:function(b,k){1&b&&(h.\u0275\u0275elementStart(0,"ngx-no-padding-layout"),h.\u0275\u0275element(1,"ngx-residents-list",0),h.\u0275\u0275elementEnd()),2&b&&(h.\u0275\u0275advance(1),h.\u0275\u0275property("placeId",k.placeId)("status",k.status))},dependencies:[R.F,E.o]}),g})()},{path:"crear",component:C.P},{path:"editar",component:C.P}]}];let M=(()=>{class g{}return g.\u0275fac=function(b){return new(b||g)},g.\u0275mod=h.\u0275\u0275defineNgModule({type:g}),g.\u0275inj=h.\u0275\u0275defineInjector({imports:[f.Bz.forChild(V),f.Bz]}),g})();var T=m(24006),L=m(97137),O=m(78253);let A=(()=>{class g{}return g.\u0275fac=function(b){return new(b||g)},g.\u0275mod=h.\u0275\u0275defineNgModule({type:g}),g.\u0275inj=h.\u0275\u0275defineInjector({imports:[L.O,T.u5,T.UX,M,p.zyh,l.ne,p.nKr,p.T2N,p.IIj,p.KdK,p.EoG,p.MfT,p.uuI,p.OA,p.obu,O.AccessReportModule,p.obu]}),g})()},12013:(j,w,m)=>{m.d(w,{g:()=>C});var p=m(92340),l=m(80529),f=m(30551);let C=(()=>{class h{constructor(R){this.http=R,this.apiUrl=p.N.apiUrl}send(R){const E=`${this.apiUrl}/insertNotificacionGrupal`,s={headers:new l.WM({Authorization:p.N.token})};return this.http.post(E,R,s)}getByResident(R){return this.http.post(`${this.apiUrl}/getAllNotificacion_lugar`,R)}}return h.\u0275fac=function(R){return new(R||h)(f.\u0275\u0275inject(l.eN))},h.\u0275prov=f.\u0275\u0275defineInjectable({token:h,factory:h.\u0275fac,providedIn:"root"}),h})()}}]);