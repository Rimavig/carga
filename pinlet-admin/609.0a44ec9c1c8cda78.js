"use strict";(self.webpackChunkngx_admin_demo=self.webpackChunkngx_admin_demo||[]).push([[609],{6494:(T,v,d)=>{d.d(v,{P:()=>R});var m=d(24006),l=d(36517),e=d(30551),_=d(12368),b=d(18328),h=d(36895);function n(r,c){if(1&r&&(e.\u0275\u0275elementStart(0,"nb-tab",11)(1,"div",6)(2,"div",12)(3,"div",13)(4,"span"),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(6,"div",12)(7,"div",13)(8,"span"),e.\u0275\u0275text(9),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(10,"div",12)(11,"div",13)(12,"span"),e.\u0275\u0275text(13),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(14,"div",12)(15,"div",13)(16,"span"),e.\u0275\u0275text(17),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(18,"div",12)(19,"div",13)(20,"span"),e.\u0275\u0275text(21),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(22,"div",12)(23,"div",13)(24,"span"),e.\u0275\u0275text(25),e.\u0275\u0275elementEnd()()()()()),2&r){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1("Nombres: ",t.resident.nombres,""),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1("Apellidos: ",t.resident.apellidos,""),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1("C\xe9dula: ",t.resident.cedula,""),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1("Correo: ",t.resident.correo,""),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1("Celular: ",t.resident.celular,""),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1("Descripci\xf3n: ",t.resident.descripcion,"")}}function g(r,c){if(1&r&&(e.\u0275\u0275elementStart(0,"nb-option",23),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&r){const t=c.$implicit;e.\u0275\u0275property("value",t.id_primario),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.nombre_primario," ")}}function C(r,c){if(1&r&&(e.\u0275\u0275elementStart(0,"nb-option",23),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&r){const t=c.$implicit;e.\u0275\u0275property("value",t.id_secundario),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.nombre_secundario," ")}}const x=function(){return{standalone:!0}};function f(r,c){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"nb-tab",14)(1,"form",15)(2,"div",6)(3,"div",12)(4,"div",16)(5,"label",17),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"nb-select",18),e.\u0275\u0275listener("selectedChange",function(s){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(o.onPrimarioChange(s))})("ngModelChange",function(s){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(o.selectedPrimario=s)}),e.\u0275\u0275template(8,g,2,2,"nb-option",19),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(9,"div",12)(10,"div",16)(11,"label",20),e.\u0275\u0275text(12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"nb-select",21),e.\u0275\u0275template(14,C,2,2,"nb-option",19),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(15,"div",6)(16,"div",22)(17,"button",10),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.updateResidentPlace())}),e.\u0275\u0275text(18,"Actualizar"),e.\u0275\u0275elementEnd()()()()()}if(2&r){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("formGroup",t.residentForm),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(t.primario),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngModel",t.selectedPrimario)("ngModelOptions",e.\u0275\u0275pureFunction0(7,x)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",t.primarioList),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(t.secundario),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",t.secundarioList)}}function P(r,c){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",25)(1,"nb-checkbox",28),e.\u0275\u0275listener("checkedChange",function(s){const a=e.\u0275\u0275restoreView(t).$implicit,u=e.\u0275\u0275nextContext(3).$implicit,p=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(p.addOrRemovePermission(s,u.id_permiso,a.id_permiso))}),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()}if(2&r){const t=c.$implicit,i=e.\u0275\u0275nextContext(3).$implicit,s=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("checked","A"===t.estado)("disabled",!s.selectedPermissions.includes(i.id_permiso)),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.nombre," ")}}function S(r,c){if(1&r&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,P,3,3,"div",27),e.\u0275\u0275elementContainerEnd()),2&r){const t=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",t.dependientes)}}function E(r,c){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",25)(2,"nb-checkbox",26),e.\u0275\u0275listener("checkedChange",function(s){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext().$implicit,a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.addOrRemovePermission(s,o.id_permiso))}),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(4,S,2,1,"ng-container",24),e.\u0275\u0275elementContainerEnd()}if(2&r){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275property("checked","A"===t.estado),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.permiso),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.dependientes.length>0)}}function I(r,c){if(1&r&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,E,5,3,"ng-container",24),e.\u0275\u0275elementContainerEnd()),2&r){const t=c.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","E"!==t.estado)}}let R=(()=>{class r{constructor(t,i,s,o,a){this._formBuilder=t,this._placeService=i,this._residentService=s,this._toastrService=o,this._dialogService=a,this.onlyPermissions=!1,this.isLoading=!1,this.primarioList=[],this.secundarioList=[],this.permissionList=[],this.selectedPermissions=[],this.initForm()}ngOnInit(){this.getPrimario(),this.getSecundario(this.resident.id_primario),this.selectedPrimario=this.resident.id_primario,this.residentForm.patchValue({id_secundario:this.resident.id_secundario}),this.getPermissions()}initForm(){this.residentForm=this._formBuilder.group({id_secundario:["",m.kI.required],usuario_modificacion:["admin",m.kI.required]})}getPrimario(){this._placeService.getPrimarios({id_usuario:1,id_lugar:this.resident.id_lugar}).subscribe({next:i=>{this.primarioList=i}})}getSecundario(t){this._placeService.getSecundarios({id_usuario:1,id_primario:t}).subscribe({next:s=>{this.secundarioList=s}})}onPrimarioChange(t){this.residentForm.patchValue({id_secundario:null}),this.getSecundario(t)}updateResidentPlace(){const t={id_residente_lugar:this.resident.id_residente_lugar,id_residente:this.resident.id_residente,descripcion:this.resident.descripcion,...this.residentForm.value};this._residentService.updateResidenteLugar(t).subscribe({next:()=>{this.showToast("success","Residencia actualizada")},error:()=>{this.showToast("danger","Error al actualizar")}})}getPermissions(){this.isLoading=!0,this._residentService.getPermissions({id_residente_lugar:this.resident.id_residente_lugar,id_lugar:this.resident.id_lugar}).subscribe({next:i=>{this.permissionList=i,this.permissionList.map(s=>{"A"==s.estado&&(this.selectedPermissions.push(s.id_permiso),s.dependientes?.map(o=>{"A"==o.estado&&this.selectedPermissions.push(o.id_permiso)}))}),this.isLoading=!1}})}addOrRemovePermission(t,i,s){const o=t?"A":"I";this.permissionList=this.permissionList.map(a=>(a.id_permiso==i&&(s?(t?this.selectedPermissions.push(s):this.selectedPermissions=this.selectedPermissions.filter(u=>u!=s),a.dependientes=a.dependientes.map(u=>(u.id_permiso==s&&(u.estado=o),u))):(t?this.selectedPermissions.push(i):(this.selectedPermissions=this.selectedPermissions.filter(u=>u!=a.id_permiso),a.dependientes=a.dependientes.map(u=>(this.selectedPermissions=this.selectedPermissions.filter(p=>p!=u.id_permiso),u.estado=o,u))),a.estado=o)),a))}updatePermissions(){const t={id_residente_lugar:this.resident.id_residente_lugar,lista:this.selectedPermissions.sort((i,s)=>i-s),usuario_modificacion:"admin"};this._residentService.updatePermissions(t).subscribe({next:()=>{this.onlyPermissions?this._dialogService.close(!0):this.showToast("success","Permisos actualizados")},error:()=>{this.showToast("danger","Error al actualizar")}})}showToast(t,i){this._toastrService.show("",i,{status:t,destroyByClick:!0,duration:3e3,hasIcon:!1,position:l.fe3.TOP_RIGHT,preventDuplicates:!0})}}return r.\u0275fac=function(t){return new(t||r)(e.\u0275\u0275directiveInject(m.qu),e.\u0275\u0275directiveInject(_.k),e.\u0275\u0275directiveInject(b.B),e.\u0275\u0275directiveInject(l.quB),e.\u0275\u0275directiveInject(l.X4l))},r.\u0275cmp=e.\u0275\u0275defineComponent({type:r,selectors:[["ngx-resident-form"]],inputs:{resident:"resident",primario:"primario",secundario:"secundario",onlyPermissions:"onlyPermissions"},decls:16,vars:4,consts:[[1,"row","detail-container"],[1,"col-lg-12"],["fullWidth",""],["tabTitle","Informaci\xf3n",4,"ngIf"],["tabTitle","Residencia",4,"ngIf"],["tabTitle","Permisos",3,"nbSpinner"],[1,"row"],[4,"ngFor","ngForOf"],[1,"row","pt-1"],[1,"col-12"],["nbButton","","status","info","hero","",3,"click"],["tabTitle","Informaci\xf3n"],[1,"col-md-6"],[1,"detail","py-1"],["tabTitle","Residencia"],[1,"mt-2",3,"formGroup"],[1,"form-group"],["for","inputPrimario",1,"label"],["fullWidth","","id","inputPrimario",3,"ngModel","ngModelOptions","selectedChange","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["for","inputSecundario",1,"label"],["fullWidth","","id","inputSecundario","formControlName","id_secundario","placeholder","Seleccionar una opci\xf3n"],[1,"col-md-12"],[3,"value"],[4,"ngIf"],[1,"col-6","py-1"],[3,"checked","checkedChange"],["class","col-6 py-1",4,"ngFor","ngForOf"],[3,"checked","disabled","checkedChange"]],template:function(t,i){1&t&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"nb-card")(3,"nb-card-header"),e.\u0275\u0275text(4,"Editar Residente"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"nb-card-body")(6,"nb-tabset",2),e.\u0275\u0275template(7,n,26,6,"nb-tab",3),e.\u0275\u0275template(8,f,19,8,"nb-tab",4),e.\u0275\u0275elementStart(9,"nb-tab",5)(10,"div",6),e.\u0275\u0275template(11,I,2,1,"ng-container",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"div",8)(13,"div",9)(14,"button",10),e.\u0275\u0275listener("click",function(){return i.updatePermissions()}),e.\u0275\u0275text(15,"Actualizar"),e.\u0275\u0275elementEnd()()()()()()()()()),2&t&&(e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",!i.onlyPermissions),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!i.onlyPermissions),e.\u0275\u0275advance(1),e.\u0275\u0275property("nbSpinner",i.isLoading),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",i.permissionList))},dependencies:[h.sg,h.O5,m._Y,m.JJ,m.JL,m.On,m.sg,m.u,l.Asz,l.yKW,l.ndF,l.DPz,l.rs,l.q51,l.kyn,l.TR4,l.NTf,l.Q7R],styles:[".detail-container[_ngcontent-%COMP%]{width:700px}"]}),r})()},46609:(T,v,d)=>{d.d(v,{o:()=>R});var m=d(15861),l=d(74385),e=d(36517),_=d(42658),b=d(36749),h=d(6494),n=d(30551),g=d(7672),C=d(18328),x=d(12368),f=d(36895);const P=["password"];function S(r,c){if(1&r&&(n.\u0275\u0275elementStart(0,"nb-option",7),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&r){const t=c.$implicit,i=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("value",t),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",i.statusList[t]," ")}}function E(r,c){if(1&r){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"nb-select",5),n.\u0275\u0275listener("selectedChange",function(s){n.\u0275\u0275restoreView(t);const o=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(o.getResidents(o.placeId,s))}),n.\u0275\u0275template(2,S,2,2,"nb-option",6),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()}if(2&r){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("selected",t.selectedStatus),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",t.status)}}function I(r,c){if(1&r&&(n.\u0275\u0275elementStart(0,"div",8)(1,"h6"),n.\u0275\u0275text(2,"Clave temporal del usuario"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(3,"p",9),n.\u0275\u0275text(4),n.\u0275\u0275elementEnd()()),2&r){const t=c.$implicit;n.\u0275\u0275advance(4),n.\u0275\u0275textInterpolate(t)}}let R=(()=>{class r{constructor(t,i,s,o,a,u){this._router=t,this._activatedRoute=i,this._dialogService=s,this._toastrService=o,this._residentService=a,this._placeService=u,this.status=["T"],this.primario="Primario",this.secundario="Secundario",this.statusList={T:"Todos",A:"Activo",P:"Pendiente",I:"Inactivo",R:"Rechazado",E:"Eliminado"},this.customActions={approve:{name:"approve",title:'<i class="nb-checkmark" title="Aprobar"></i>'},decline:{name:"decline",title:'<i class="nb-close" title="Rechazar"></i>'},edit:{name:"edit",title:'<i class="nb-edit"></i>'},delete:{name:"delete",title:'<i class="nb-trash"></i>'},resetPassword:{name:"resetPassword",title:'<img src="./assets/images/key-outline.svg" title="Restablecer contrase\xf1a">'},logout:{name:"logout",title:'<img src="./assets/images/log-out-outline.svg" title="Cerrar sesi\xf3n">'},verify:{name:"verify",title:'<img src="./assets/images/person-done-outline.svg" title="Verificar">'},sendVerificationEmail:{name:"sendVerificationEmail",title:'<i class="nb-email" title="Enviar correo de verificaci\xf3n"></i>'},updatePlace:{name:"updatePlace",title:'<i class="nb-home" title="Solicitar actualizaci\xf3n de lugar"></i>'},updateInfo:{name:"updateInfo",title:'<i class="nb-list" title="Solicitar actualizaci\xf3n de informaci\xf3n"></i>'},accessReport:{name:"accessReport",title:'<img src="./assets/images/checklist.svg" title="Reporte de ingreso">'}},this.settings={actions:{position:"right",add:!1,edit:!1,delete:!1,custom:[]},columns:{nombres:{title:"Nombres",type:"string",filter:!0},apellidos:{title:"Apellidos",type:"string",filter:!0},cedula:{title:"Cedula",type:"string",filter:!0},correo:{title:"Correo",type:"string",filter:!0},celular:{title:"Celular",type:"string",filter:!0},nombre_primario:{title:this.primario,type:"string",filter:!0},nombre_secundario:{title:this.secundario,type:"string",filter:!0},descripcion:{title:"Descripci\xf3n",type:"string",filter:!0}}},this.source=new l.nC;const p=this._activatedRoute.parent.snapshot.paramMap.get("placeId");p&&(this.placeId=parseInt(p));const y=this._activatedRoute.snapshot.data.status;y&&(this.status=y)}ngOnInit(){this._placeService.getPlace({id_lugar:this.placeId}).subscribe(t=>{this.primario=t.primario,this.secundario=t.secundario}),this.selectedStatus=this.status[0],this.getResidents(this.placeId,this.selectedStatus),this.setActions()}setActions(){var t=this;switch(this.settings.actions.custom=[],this.selectedStatus){case"P":this.settings.actions.custom.push(this.customActions.approve),this.settings.actions.custom.push(this.customActions.decline);break;case"A":this.settings.actions.custom.push(this.customActions.accessReport,this.customActions.updatePlace,this.customActions.updateInfo,this.customActions.logout,this.customActions.resetPassword,this.customActions.edit,this.customActions.delete),this.settings.columns.estado={title:"Estado",type:"custom",renderComponent:b.P,onComponentInitFunction:i=>{i.toggle.subscribe(function(){var s=(0,m.Z)(function*(o){const a=o.value?"A":"I";yield t.updateStatus(o.row.id_residente_lugar,a),t.getResidents(t.placeId,t.selectedStatus)});return function(o){return s.apply(this,arguments)}}())},filter:!1};break;case"I":case"R":case"E":this.settings.actions.custom.push(this.customActions.approve),this.settings.actions.custom.push(this.customActions.delete)}}getResidents(t,i){this.selectedStatus=i,this.secundarioId?this._residentService.getBySecundario({id_secundario:this.secundarioId}).subscribe({next:s=>{this.source.load(s)},error:s=>{console.error(s)}}):this._residentService.getByPlace({id_lugar:t,estado:i}).subscribe({next:o=>{this.source.load(o)},error:o=>{console.error(o)}})}onCustom(t){switch(t.action){case"edit":this._dialogService.open(h.P,{context:{resident:t.data,primario:this.primario,secundario:this.secundario}}).onClose.subscribe(()=>{this.getResidents(this.placeId,this.selectedStatus)});break;case"delete":"A"==this.selectedStatus?this.onUpdateStatus(t.data.id_residente_lugar,"E"):this.onDelete(t.data.id_residente_lugar);break;case"approve":this.onApprove(t.data,"A");break;case"decline":this.onUpdateStatus(t.data.id_residente_lugar,"R");break;case"resetPassword":this.onResetPassword(t.data.id_residente);break;case"logout":this.onResidentLogout(t.data.id_residente);break;case"verify":this.onVerify(t.data.id_residente);break;case"sendVerificationEmail":this.onSendVerificationEmail(t.data.id_residente);break;case"updatePlace":this.onUpdatePlace(t.data.id_residente_lugar);break;case"updateInfo":this.onUpdateInfo(t.data.id_residente);break;case"accessReport":this.onAccessReport(t.data.id_residente_lugar,t.data.id_residente)}}add(){this._router.navigate(["/pages/residentes/crear"])}onDelete(t){this._dialogService.open(_.S,{context:{title:"\xbfEst\xe1 seguro de eliminar el registro?"}}).onClose.subscribe({next:i=>{i&&this.deleteResident(t)}})}deleteResident(t){this._residentService.delete({id_residente_lugar:t,usuario_modificacion:"admin"}).subscribe({next:()=>{this.showToast("success","Residente eliminado"),this.getResidents(this.placeId,this.selectedStatus)},error:()=>{this.showToast("danger","Error al eliminar el residente")}})}onApprove(t,i){var s=this;this._dialogService.open(h.P,{context:{resident:t,primario:this.primario,secundario:this.secundario,onlyPermissions:!0}}).onClose.subscribe(function(){var o=(0,m.Z)(function*(a){a&&(yield s.updateStatus(t.id_residente_lugar,i),s.getResidents(s.placeId,s.selectedStatus))});return function(a){return o.apply(this,arguments)}}())}onUpdateStatus(t,i){var o,s=this;this._dialogService.open(_.S,{context:{title:"\xbfEst\xe1 seguro de actulizar el estado del registro?"}}).onClose.subscribe({next:(o=(0,m.Z)(function*(a){a&&(yield s.updateStatus(t,i),s.getResidents(s.placeId,s.selectedStatus))}),function(u){return o.apply(this,arguments)})})}updateStatus(t,i){return new Promise(s=>{this._residentService.updateStatus({id_residente_lugar:t,estado:i,usuario_modificacion:"admin"}).subscribe({next:()=>{this.showToast("success","Estado actualizado")},error:()=>{this.showToast("danger","Ha ocurrido un error. Intente nuevamente")},complete:()=>{setTimeout(()=>{s()},0)}})})}onResetPassword(t){this._dialogService.open(_.S,{context:{title:"\xbfEst\xe1 seguro de restablecer la contrase\xf1a del residente?"}}).onClose.subscribe({next:i=>{i&&this.resetPassword(t)}})}resetPassword(t){this._residentService.resetPassword({id_residente:t,usuario_modificacion:"admin"}).subscribe({next:s=>{this._dialogService.open(this.dialog,{context:s.clave})},error:()=>{this.showToast("danger","Ha ocurrido un error. Intente nuevamente")}})}onResidentLogout(t){this._dialogService.open(_.S,{context:{title:"\xbfEst\xe1 seguro de cerrar la sesi\xf3n del residente?"}}).onClose.subscribe({next:i=>{i&&this.residentLogout(t)}})}residentLogout(t){this._residentService.residentLogout({id_residente:t,usuario_modificacion:"admin"}).subscribe({next:()=>{this.showToast("success","Sesi\xf3n finalizada")},error:()=>{this.showToast("danger","Ha ocurrido un error. Intente nuevamente")}})}onVerify(t){this._dialogService.open(_.S,{context:{title:"\xbfEst\xe1 seguro de verificar la cuenta del residente?"}}).onClose.subscribe({next:i=>{i&&this.verify(t)}})}verify(t){this._residentService.verify({id_residente:t,usuario_modificacion:"admin"}).subscribe({next:()=>{this.showToast("success","Cuenta verificada")},error:()=>{this.showToast("danger","Ha ocurrido un error. Intente nuevamente")}})}onSendVerificationEmail(t){this._dialogService.open(_.S,{context:{title:"\xbfEst\xe1 seguro de enviar el correo de verificaci\xf3n al residente?"}}).onClose.subscribe({next:i=>{i&&this.sendVerificationEmail(t)}})}sendVerificationEmail(t){this._residentService.sendVerificationEmail({id_residente:t,usuario_modificacion:"admin"}).subscribe({next:()=>{this.showToast("success","Correo enviado")},error:()=>{this.showToast("danger","Ha ocurrido un error. Intente nuevamente")}})}onUpdatePlace(t){this._dialogService.open(_.S,{context:{title:"\xbfEst\xe1 seguro de solicitar la actualizaci\xf3n de lugar?"}}).onClose.subscribe({next:i=>{i&&this.updatePlace(t)}})}updatePlace(t){this._residentService.updatePlace({id_residente_lugar:t,estado:"S",usuario_modificacion:"admin"}).subscribe({next:()=>{this.showToast("success","Solicitud establecida")},error:()=>{this.showToast("danger","Ha ocurrido un error. Intente nuevamente")}})}onUpdateInfo(t){this._dialogService.open(_.S,{context:{title:"\xbfEst\xe1 seguro de solicitar la actualizaci\xf3n de informaci\xf3n?"}}).onClose.subscribe({next:i=>{i&&this.updateInfo(t)}})}updateInfo(t){this._residentService.updateInfo({id_residente:t,estado:"P",usuario_modificacion:"admin"}).subscribe({next:()=>{this.showToast("success","Solicitud establecida")},error:()=>{this.showToast("danger","Ha ocurrido un error. Intente nuevamente")}})}onAccessReport(t,i){this._router.navigateByUrl(`/pages/reporte-ingreso?idResidente=${i}&idResidenteLugar=${t}`)}showToast(t,i){this._toastrService.show("",i,{status:t,destroyByClick:!0,duration:3e3,hasIcon:!1,position:e.fe3.TOP_RIGHT,preventDuplicates:!0})}}return r.\u0275fac=function(t){return new(t||r)(n.\u0275\u0275directiveInject(g.F0),n.\u0275\u0275directiveInject(g.gz),n.\u0275\u0275directiveInject(e.Gln),n.\u0275\u0275directiveInject(e.quB),n.\u0275\u0275directiveInject(C.B),n.\u0275\u0275directiveInject(x.k))},r.\u0275cmp=n.\u0275\u0275defineComponent({type:r,selectors:[["ngx-residents-list"]],viewQuery:function(t,i){if(1&t&&n.\u0275\u0275viewQuery(P,5),2&t){let s;n.\u0275\u0275queryRefresh(s=n.\u0275\u0275loadQuery())&&(i.dialog=s.first)}},inputs:{placeId:"placeId",secundarioId:"secundarioId",status:"status",primario:"primario",secundario:"secundario"},decls:10,vars:3,consts:[[1,"w-100","d-flex","justify-content-between"],[1,"d-flex"],[4,"ngIf"],[1,"custom-table",3,"settings","source","custom"],["password",""],["status","basic",1,"pr-4",3,"selected","selectedChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"password-container"],[1,"text-center","pt-3"]],template:function(t,i){1&t&&(n.\u0275\u0275elementStart(0,"nb-card")(1,"nb-card-header",0)(2,"h5"),n.\u0275\u0275text(3,"Residentes"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(4,"div",1),n.\u0275\u0275template(5,E,3,2,"ng-container",2),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(6,"nb-card-body")(7,"ng2-smart-table",3),n.\u0275\u0275listener("custom",function(o){return i.onCustom(o)}),n.\u0275\u0275elementEnd()()(),n.\u0275\u0275template(8,I,5,1,"ng-template",null,4,n.\u0275\u0275templateRefExtractor)),2&t&&(n.\u0275\u0275advance(5),n.\u0275\u0275property("ngIf",i.status.length>1),n.\u0275\u0275advance(2),n.\u0275\u0275property("settings",i.settings)("source",i.source))},dependencies:[f.sg,f.O5,e.Asz,e.yKW,e.ndF,l.T5,e.rs,e.q51],styles:["[_nghost-%COMP%]     tr .ng2-smart-actions{height:auto}[_nghost-%COMP%]     ng2-st-tbody-custom{display:flex;align-items:center}[_nghost-%COMP%]     ng2-st-tbody-custom a.ng2-smart-action.ng2-smart-action-custom-custom{display:flex;align-items:center;text-align:center}[_nghost-%COMP%]     ng2-st-tbody-custom a.ng2-smart-action.ng2-smart-action-custom-custom img{width:22px;filter:contrast(.3)}.password-container[_ngcontent-%COMP%]{padding:20px;background-color:#fff}"]}),r})()}}]);