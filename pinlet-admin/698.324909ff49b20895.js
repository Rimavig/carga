"use strict";(self.webpackChunkngx_admin_demo=self.webpackChunkngx_admin_demo||[]).push([[698],{23698:(N,y,i)=>{i.r(y),i.d(y,{CountriesModule:()=>B});var p=i(36895),r=i(36517),h=i(74385),d=i(7672),b=i(15861),I=i(42658),S=i(36749),t=i(30551),g=i(5527);let _=(()=>{class n{constructor(e,o,s,u){this._router=e,this._countryService=o,this._dialogService=s,this._toastrService=u,this.settings={actions:{position:"right",add:!1,edit:!1,delete:!1,custom:[{name:"edit",title:'<i class="nb-edit"></i>'},{name:"delete",title:'<i class="nb-trash"></i>'}]},columns:{nombre:{title:"Nombre",type:"string"},estado:{title:"Estado",type:"custom",renderComponent:S.P,onComponentInitFunction:l=>{l.toggle.subscribe(m=>{this.updateStatus(m.row.id_pais,m.value?"A":"I")})}}}},this.source=new h.nC,this.getCountries()}getCountries(){var o,e=this;this._countryService.getAll({id_usuario:"1"}).subscribe({next:(o=(0,b.Z)(function*(s){const u=s.filter(l=>"E"!=l.estado);e.source.load(u)}),function(u){return o.apply(this,arguments)}),error:o=>{console.error(o)}})}add(){this._router.navigate(["/pages/paises/crear"])}onCustom(e){switch(e.action){case"edit":this._router.navigate([`/pages/paises/editar/${e.data.id_pais}`]);break;case"delete":this.onDelete(e.data.id_pais)}}onDelete(e){this._dialogService.open(I.S,{context:{title:"\xbfEst\xe1 seguro de eliminar el registro?"}}).onClose.subscribe({next:o=>{o&&this.deleteCountry(e)}})}updateStatus(e,o){this._countryService.updateStatus({id_pais:e,estado:o,usuario_modificacion:"admin"}).subscribe({next:()=>{this.showToast("success","Estado de pa\xeds actualizado")},error:()=>{this.showToast("danger","Ha ocurrido un error. Intente nuevamente")}})}deleteCountry(e){this._countryService.delete({id_pais:e,usuario_modificacion:"admin"}).subscribe({next:()=>{this.showToast("success","Pa\xeds eliminado"),this.getCountries()},error:()=>{this.showToast("danger","Error al eliminar el pa\xeds")}})}showToast(e,o){this._toastrService.show("",o,{status:e,destroyByClick:!0,duration:3e3,hasIcon:!1,position:r.fe3.TOP_RIGHT,preventDuplicates:!0})}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(d.F0),t.\u0275\u0275directiveInject(g.T),t.\u0275\u0275directiveInject(r.Gln),t.\u0275\u0275directiveInject(r.quB))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["ngx-countries-list"]],decls:9,vars:2,consts:[[1,"w-100","d-flex","justify-content-between"],[1,""],["nbButton","","status","info","hero","",3,"click"],[1,"custom-table",3,"settings","source","custom"]],template:function(e,o){1&e&&(t.\u0275\u0275elementStart(0,"nb-card")(1,"nb-card-header",0)(2,"h5"),t.\u0275\u0275text(3,"Pa\xedses"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"div",1)(5,"button",2),t.\u0275\u0275listener("click",function(){return o.add()}),t.\u0275\u0275text(6," Nuevo "),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(7,"nb-card-body")(8,"ng2-smart-table",3),t.\u0275\u0275listener("custom",function(u){return o.onCustom(u)}),t.\u0275\u0275elementEnd()()()),2&e&&(t.\u0275\u0275advance(8),t.\u0275\u0275property("settings",o.settings)("source",o.source))},dependencies:[r.Asz,r.yKW,r.ndF,h.T5,r.DPz],styles:["[_nghost-%COMP%]     tr .ng2-smart-actions{height:auto}[_nghost-%COMP%]     ng2-st-tbody-custom{display:flex}[_nghost-%COMP%]     ng2-st-tbody-custom a.ng2-smart-action.ng2-smart-action-custom-custom{display:inline-block;text-align:center}"]}),n})();var x=i(20732);let T=(()=>{class n{constructor(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["ngx-countries"]],decls:2,vars:0,template:function(e,o){1&e&&(t.\u0275\u0275elementStart(0,"ngx-no-padding-layout"),t.\u0275\u0275element(1,"router-outlet"),t.\u0275\u0275elementEnd())},dependencies:[x.F,d.lC],encapsulation:2}),n})();var c=i(24006),v=i(99501),F=i(45096);function E(n,a){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",13)(2,"h6"),t.\u0275\u0275text(3,"Provincias"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"div",14)(5,"button",6),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const s=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(s.add())}),t.\u0275\u0275text(6," Nuevo "),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275element(7,"ngx-provinces-list",15),t.\u0275\u0275elementContainerEnd()}if(2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(7),t.\u0275\u0275property("countryId",e.countryId)}}let C=(()=>{class n{constructor(e,o,s,u,l,m){this._router=e,this._formBuilder=o,this._activatedRoute=s,this._countryService=u,this._toastrService=l,this._location=m,this.provinces=[],this.statusOptions=[{key:"Activo",value:v.q.ACTIVO},{key:"Inactivo",value:v.q.INACTIVO},{key:"Pendiente",value:v.q.PENDIENTE}],this._activatedRoute.params.subscribe(f=>{this.countryId=f.id}),this.initForm()}ngOnInit(){this.countryId?(this.getCountry(),this.action="Editar"):this.action="Crear"}initForm(){this.countryForm=this._formBuilder.group({nombre:["",c.kI.required],estado:[""],usuario_creacion:["admin",c.kI.required]})}getCountry(){this._countryService.getById({id_pais:this.countryId}).subscribe({next:e=>{this.countryForm.patchValue(e),this.selectedStatus=e.estado},error:e=>{console.error(e)}})}save(){this.countryId?this.update():this.create()}create(){this._countryService.create(this.countryForm.value).subscribe({next:e=>{this.showToast("success","Pa\xeds creado"),this.goBack()},error:e=>{this.showToast("danger","Ha ocurrido un error. Intente nuevamente")}})}update(){this._countryService.update({id_pais:this.countryId,nombre:this.countryForm.value.nombre,usuario_modificacion:"admin"}).subscribe({next:()=>{this.showToast("success","Pa\xeds actualizado")},error:()=>{this.showToast("danger","Ha ocurrido un error. Intente nuevamente")}})}changeStatus(e){e!==this.selectedStatus&&(this.selectedStatus=e,this._countryService.updateStatus({id_pais:this.countryId,estado:e,usuario_modificacion:"admin"}).subscribe({next:()=>{this.showToast("success","\xa1Se ha cambiado el estado!")},error:()=>{this.showToast("danger","\xa1No se ha podido cambiar el estado!")}}))}showToast(e,o){this._toastrService.show("",o,{status:e,destroyByClick:!0,duration:3e3,hasIcon:!1,position:r.fe3.TOP_RIGHT,preventDuplicates:!0})}add(){this._router.navigateByUrl(`/pages/provincias/crear?idPais=${this.countryId}`)}goBack(){this._router.navigate(["/pages/paises"])}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(d.F0),t.\u0275\u0275directiveInject(c.qu),t.\u0275\u0275directiveInject(d.gz),t.\u0275\u0275directiveInject(g.T),t.\u0275\u0275directiveInject(r.quB),t.\u0275\u0275directiveInject(p.Ye))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["ngx-country-form"]],decls:21,vars:3,consts:[[1,"row"],[1,"col-lg-12"],[1,"w-100","d-flex","justify-content-between"],[1,"d-flex","align-items-center","h5"],[1,"d-flex","cursor-pointer","no-hover","pr-2",3,"click"],[1,"custom-icon","nb-arrow-left"],["nbButton","","status","info","hero","",3,"click"],[3,"formGroup"],[1,"col-sm-4"],[1,"form-group"],["for","inputNombre",1,"label"],["type","text","nbInput","","fullWidth","","id","inputNombre","placeholder","Nombre","formControlName","nombre"],[4,"ngIf"],[1,"w-100","d-flex","justify-content-between","py-3"],[1,""],[3,"countryId"]],template:function(e,o){1&e&&(t.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"nb-card")(3,"nb-card-header",2)(4,"div",3)(5,"a",4),t.\u0275\u0275listener("click",function(){return o.goBack()}),t.\u0275\u0275element(6,"i",5),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"h5"),t.\u0275\u0275text(8),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(9,"div")(10,"button",6),t.\u0275\u0275listener("click",function(){return o.save()}),t.\u0275\u0275text(11," Guardar "),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(12,"nb-card-body")(13,"form",7)(14,"div",0)(15,"div",8)(16,"div",9)(17,"label",10),t.\u0275\u0275text(18,"Nombre"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(19,"input",11),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275template(20,E,8,1,"ng-container",12),t.\u0275\u0275elementEnd()()()()),2&e&&(t.\u0275\u0275advance(8),t.\u0275\u0275textInterpolate1("",o.action," Pa\xeds"),t.\u0275\u0275advance(5),t.\u0275\u0275property("formGroup",o.countryForm),t.\u0275\u0275advance(7),t.\u0275\u0275property("ngIf",o.countryId))},dependencies:[p.O5,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,r.h8i,r.Asz,r.yKW,r.ndF,r.DPz,F.X]}),n})();const w=[{path:"",component:T,children:[{path:"",component:_},{path:"crear",component:C},{path:"editar/:id",component:C}]}];let j=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[d.Bz.forChild(w),d.Bz]}),n})();var P=i(27074);let B=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[p.ez,P.O,j,c.UX,r.nKr,r.zyh,h.ne,r.T2N,r.IIj]}),n})()}}]);